# 天气鸭项目开发指导文档 - 总览

欢迎使用"天气鸭"桌面应用开发指导文档！本系列文档将指导您完成整个项目的开发过程，从环境搭建到最终部署。

---

## 📚 文档结构

本开发指导文档共分为 **5个阶段**，每个阶段对应一个独立的Markdown文件。请按顺序阅读并实施。

### 🗂️ 阶段文档列表

| 阶段 | 文档名称 | 核心内容 | 适用需求 |
|------|----------|----------|----------|
| **阶段1** | [01-项目初始化指南.md](./01-项目初始化指南.md) | 项目环境搭建、依赖配置、版本控制 | 基础环境 |
| **阶段2** | [02-UI框架和样式系统搭建.md](./02-UI框架和样式系统搭建.md) | Tailwind CSS配置、基础组件库、设计系统 | 需求1 |
| **阶段3上** | [03-天气数据集成和API对接(上).md](./03-天气数据集成和API对接(上).md) | 和风天气API集成、HTTP客户端、错误处理 | 需求15 |
| **阶段3下** | [03-天气数据集成和API对接(下).md](./03-天气数据集成和API对接(下).md) | 城市服务、地理定位、测试验证 | 需求15 |
| **阶段4** | [04-核心功能实现-天气组件.md](./04-核心功能实现-天气组件.md) | 天气卡片、预报组件、天气图标系统 | 需求2-4 |
| **阶段5** | [05-核心功能实现-时钟和报时.md](./05-核心功能实现-时钟和报时.md) | 数字/模拟时钟、布谷鸟报时、音频系统 | 需求12-13 |

---

## 🎯 项目核心目标

根据 **requirements.md** 和 **技术方案v1.0.md**，"天气鸭"项目的核心目标包括：

### 功能目标
- ✅ **现代化UI设计** - 毛玻璃效果、流畅动画
- ✅ **天气信息展示** - 实时天气、7天预报、24小时预报
- ✅ **时钟功能** - 数字/模拟时钟、实时更新
- ✅ **布谷鸟报时** - 整点自动报时、音效播放
- ✅ **城市搜索** - 智能搜索、地理定位

### 技术目标
- ✅ **双平台架构** - Electron桌面版 + Web版
- ✅ **类型安全** - TypeScript全栈
- ✅ **性能优化** - 缓存机制、按需加载
- ✅ **代码质量** - 遵循项目规范、完整测试

---

## 📖 适用的项目规范

每个阶段文档都会明确标注所适用的项目规范。以下是规范文件清单：

### 核心规范（必须遵循）
- 📘 **开发需求规范** (`.qoder/rules/requirements-spec.zh-CN.md`)
- 📘 **工作流规范** (`.qoder/rules/workflow-spec.zh-CN.md`)
- 📘 **命名约定** (`.qoder/rules/naming-conventions.zh-CN.md`)

### 质量规范（强烈推荐）
- 📗 **测试规范** (`.qoder/rules/testing-spec.zh-CN.md`)
- 📗 **安全规范** (`.qoder/rules/security-spec.zh-CN.md`)
- 📗 **错误处理规范** (`.qoder/rules/error-handling-spec.zh-CN.md`)

### 可选规范
- 📙 **API设计规范** (`.qoder/rules/api-design-spec.zh-CN.md`)
- 📙 **Git工作流规范** (`.qoder/rules/git-workflow-spec.zh-CN.md`)

---

## 🚀 快速开始

### 第一步：环境准备

确保您的开发环境满足以下要求：

```bash
# 检查 Node.js 版本（要求 >= 18）
node --version

# 检查 npm 版本
npm --version

# 检查 Git 版本
git --version
```

### 第二步：开始阅读

从 **阶段1** 开始，按顺序阅读并实施每个阶段的指导：

1. 📖 阅读阶段文档
2. ✅ 按照步骤执行操作
3. 🔍 完成验收清单检查
4. ➡️ 继续下一阶段

### 第三步：参考资料

在开发过程中，请随时参考以下文件：

- **需求文档**: `requirements.md`
- **技术方案**: `技术方案v1.0.md`
- **原型设计**: `天气鸭-原型.html`
- **项目规范**: `.qoder/rules/` 目录下的所有规范文件

---

## 📊 开发进度追踪

建议使用以下表格追踪您的开发进度：

| 阶段 | 状态 | 开始日期 | 完成日期 | 备注 |
|------|------|----------|----------|------|
| 阶段1：项目初始化 | ⬜ 未开始 | - | - | - |
| 阶段2：UI框架搭建 | ⬜ 未开始 | - | - | - |
| 阶段3：API集成（上） | ⬜ 未开始 | - | - | - |
| 阶段3：API集成（下） | ⬜ 未开始 | - | - | - |
| 阶段4：天气组件 | ⬜ 未开始 | - | - | - |
| 阶段5：时钟报时 | ⬜ 未开始 | - | - | - |

**状态图例**：
- ⬜ 未开始
- 🟡 进行中
- ✅ 已完成
- ❌ 遇到问题

---

## 🔍 规范应用示例

### 示例1：命名约定的应用

```typescript
// ✅ 正确：遵循命名约定
export interface WeatherCardProps {  // 接口名：PascalCase + Props后缀
  weather: CurrentWeather;           // 属性名：camelCase
  className?: string;
}

export const WeatherCard: React.FC<WeatherCardProps> = ({  // 组件名：PascalCase
  weather,
  className,
}) => {
  const handleRefresh = () => {      // 函数名：camelCase，动词开头
    // ...
  };

  const API_KEY = 'xxx';             // 常量名：UPPER_SNAKE_CASE

  return <Card className={className}>...</Card>;
};
```

### 示例2：错误处理规范的应用

```typescript
// ✅ 正确：自定义错误类，明确的错误信息
try {
  const weather = await weatherService.getCurrentWeather(cityId);
} catch (error) {
  if (error instanceof ApiError) {
    // 根据错误类型提供友好的用户提示
    showNotification('无法获取天气数据，请稍后重试');
  } else if (error instanceof NetworkError) {
    showNotification('网络连接失败，请检查您的网络设置');
  } else {
    showNotification('发生未知错误');
  }
  console.error('天气数据获取失败:', error);
}
```

### 示例3：安全规范的应用

```typescript
// ✅ 正确：环境变量管理API密钥
const API_KEY = import.meta.env.VITE_QWEATHER_API_KEY;

if (!API_KEY) {
  console.error('❌ 缺少API密钥配置');
}

// ❌ 错误：硬编码密钥
// const API_KEY = '6b95a713b2854ca0b5b62ac9d9cca3bb';
```

---

## 📝 每个阶段的验收清单

每个阶段文档末尾都包含详细的验收清单，确保您：

- ✅ **功能完整性** - 所有功能正常工作
- ✅ **规范符合性** - 代码遵循项目规范
- ✅ **代码质量** - TypeScript类型检查通过
- ✅ **测试通过** - 单元测试和集成测试通过

---

## 🆘 遇到问题？

### 常见问题解决

1. **依赖安装失败**
   - 清除npm缓存：`npm cache clean --force`
   - 删除 `node_modules` 和 `package-lock.json`
   - 重新安装：`npm install`

2. **TypeScript编译错误**
   - 检查 `tsconfig.json` 配置
   - 确保所有类型定义文件已安装
   - 运行：`npm run typecheck`

3. **API调用失败**
   - 检查 `.env` 文件中的API密钥
   - 验证网络连接
   - 查看浏览器控制台错误信息

4. **环境变量不生效**
   - 确保变量名以 `VITE_` 开头
   - 重启开发服务器
   - 检查 `.env` 文件位置（应在项目根目录）

### 获取帮助

- 📖 查阅相关规范文件
- 🔍 搜索技术方案中的解决方案
- 💡 查看原型文件的实现参考

---

## 🎓 学习路径建议

### 对于初学者
1. 先完成阶段1和阶段2，熟悉环境和UI框架
2. 详细阅读每个规范文件，理解规范要求
3. 在实施过程中遇到问题及时查阅文档

### 对于有经验的开发者
1. 快速浏览所有阶段文档，了解整体架构
2. 重点关注规范应用和最佳实践
3. 可以适当调整实施顺序，但要确保依赖关系正确

---

## 📌 重要提示

### 开发规范遵循原则

1. **强制遵循核心规范** - 开发需求规范、工作流规范、命名约定
2. **强烈推荐质量规范** - 测试规范、安全规范、错误处理规范
3. **根据需要应用可选规范** - API设计规范、Git工作流规范

### 代码提交规范

遵循 Conventional Commits 规范：

```bash
# 功能开发
git commit -m "feat: 添加天气卡片组件"

# Bug修复
git commit -m "fix: 修复时钟秒针跳动问题"

# 文档更新
git commit -m "docs: 更新API文档"

# 样式调整
git commit -m "style: 优化天气卡片样式"

# 代码重构
git commit -m "refactor: 重构HTTP客户端"
```

---

## 📅 建议的开发时间表

| 阶段 | 预计时间 | 关键里程碑 |
|------|----------|-----------|
| 阶段1 | 1天 | 环境搭建完成，项目可运行 |
| 阶段2 | 1-2天 | UI框架就绪，基础组件完成 |
| 阶段3 | 2-3天 | API集成完成，数据获取正常 |
| 阶段4 | 2天 | 天气组件完成，显示正常 |
| 阶段5 | 1-2天 | 时钟和报时功能完成 |
| **总计** | **7-10天** | 核心功能全部完成 |

---

## 🎉 开发完成后

完成所有阶段后，您将拥有：

- ✅ 完整的天气鸭桌面应用
- ✅ 符合所有项目规范的高质量代码
- ✅ 完善的错误处理和用户体验
- ✅ 可维护和可扩展的代码架构
- ✅ 完整的测试覆盖

---

## 📖 下一步建议

完成核心开发后，可以考虑以下扩展功能：

- 🌈 **天气动画增强** - Canvas动画系统
- 📱 **响应式设计** - 适配不同屏幕尺寸
- 🔔 **待办事项** - 添加待办清单功能
- 🎨 **主题切换** - 支持深色/浅色主题
- 🌐 **多语言支持** - i18n国际化
- 📦 **Electron打包** - 桌面应用打包和分发

---

**祝您开发顺利！**

如有任何问题，请参考具体阶段文档或查阅项目规范文件。

---

**文档版本**: v1.0  
**创建日期**: 2024-01-01  
**维护团队**: 天气鸭开发团队  
**项目地址**: `Windows Desktop Clock Utility/`
